# 了解 OAuth 应用的授权范围 

 <p>通过 scopes，你可以准确的指定所需的访问类型。scopes 限制 OAuth tokens 的访问权限。他们不会授予超出用户已有权限的任何其他权限。</p><p>在语雀上设置 OAuth 应用程序时，会在授权表单上向用户显示请求的 scopes。</p><p>检查你拥有的 OAuth scopes 以及 API 接受的 scopes：</p>

 ``` bash 
 curl -X GET \
  https://www.yuque.com/api/v2/user \
  -H 'X-Auth-Token: 授权后获得的 Token' \

Headers：
X-OAuth-Scopes：doc,attach_upload
X-Accepted-OAuth-Scopes：null
 
 ``` 

<ul><li><code>X-OAuth-Scopes</code> 列出 access token 已被授权的 scopes。</li><li><code>X-Accepted-OAuth-Scopes</code> <span>表明这个资源需要的 scopes</span>。</li></ul><p>由于在语雀中用户基本的信息是默认提供的，不需要 scopes 授权，所以 <code>X-Accepted-OAuth-Scopes</code>  没有返回。而当读取知识库、文档等信息就需要检测了，会对 access token 进行鉴权，判断是否有读取这些信息的权限，同时接口<span>返回的</span>响应头会带上 <code>X-Accepted-OAuth-Scopes</code> ，表明这个资源需要的 scopes。</p>

 ### 授权范围(scope) 

<table class="lake-table" style><colgroup><col width="236"><col width="456"></colgroup><tbody><tr><td style="text-align: center;"><p><strong>名词</strong></p></td><td style="text-align: center;"><p><strong>描述</strong></p></td></tr><tr><td style="text-align: left;"><p><strong><code>(no scope)</code></strong> </p></td><td><p>授予对公共信息的只读访问权限（只能获取用户信息，不包含手机号和邮箱<span>）</span></p></td></tr><tr><td style="text-align: left;"><p><code>group</code></p></td><td><p>修改和读取你的团队</p></td></tr><tr><td style="text-align: left;">    <code>group:read</code> </td><td><p>读取你的团队信息</p></td></tr><tr><td style="text-align: left;"><p><code>repo</code></p></td><td><p>修改和读取你的知识库</p></td></tr><tr><td style="text-align: left;"><p>    <code>repo:read</code></p></td><td><p>读取你的知识库</p></td></tr><tr><td style="text-align: left;"><p><code>topic</code></p></td><td><p>修改和读取你的主题</p></td></tr><tr><td style="text-align: left;"><p>    <code>topic:read</code></p></td><td><p>读取你的主题</p></td></tr><tr><td style="text-align: left;"><p><code>doc</code></p></td><td><p>修改和读取你的文档</p></td></tr><tr><td style="text-align: left;"><p>   <code>doc:read</code></p></td><td><p>读取你的文档</p></td></tr><tr><td style="text-align: left;"><p><code>artboard</code></p></td><td><p>修改和读取你的画板</p></td></tr><tr><td style="text-align: left;"><p>   <code>artboard:read</code></p></td><td><p>读取你的画板</p></td></tr></tbody></table><blockquote class="lake-alert lake-alert-info"><p><span style="color: #003A8C;"><strong>注意：</strong>你的 OAuth 应用可以在初始重定向定义这些 scopes。多个 scope </span><span style="color: #003A8C; background-color: #E8F7FF;">你可以通过用逗号 “,” 来分隔</span><span style="color: #003A8C;">指定它们。</span></p></blockquote><p><span style="color: #003A8C;"><br></span></p>

 ``` ruby 
 GET https://www.yuque.com/oauth2/authorize?client_id=...&scope=doc,repo 
 ``` 



 ### 规范化范围(scope) 

<p>请求多个作用域时，token 将使用规范化的作用域列表进行保存，并且丢弃另一个请求作用域隐式包含的作用域。例如：请求 <code>doc,doc:read,repo</code>  的结果是 <code>doc,repo</code> ，因为 <code>doc:read</code> 的作用域是包含在 <code>doc</code> 中的，所以会进行丢弃。</p>

 ### 高级授权范围(scope) 

<p>上传属于高级 scope，默认是不会开放的，需要这个 scope 的应用需要单独申请开通。</p><p>申请请发送邮件到 <code>support@yuque.com</code> ，说明申请的原因。</p><table class="lake-table" style><colgroup><col width="236"><col width="456"></colgroup><tbody><tr><td style="text-align: center;"><p><strong>名词</strong></p></td><td style="text-align: center;"><p><strong>描述</strong></p></td></tr><tr><td style="text-align: left;"><p><strong><code>attach_upload</code></strong> </p></td><td><p>附件上传（仅图片）</p><p>接口地址：<a href="https://www.yuque.com/yuque/developer/high_level_api#684fb2c5" target="_blank">文件上传</a></p></td></tr></tbody></table><br><br><a class="yuque-link" target="_blank" href="https://www.yuque.com/yuque/developer/understanding-scopes-for-oauth-apps"><svg viewBox="64 64 896 896" class="" data-icon="yuque" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M854.6 370.6c-9.9-39.4 9.9-102.2 73.4-124.4l-67.9-3.6s-25.7-90-143.6-98c-117.8-8.1-194.9-3-195-3 .1 0 87.4 55.6 52.4 154.7-25.6 52.5-65.8 95.6-108.8 144.7-1.3 1.3-2.5 2.6-3.5 3.7C319.4 605 96 860 96 860c245.9 64.4 410.7-6.3 508.2-91.1 20.5-.2 35.9-.3 46.3-.3 135.8 0 250.6-117.6 245.9-248.4-3.2-89.9-31.9-110.2-41.8-149.6zm-204.1 334c-10.6 0-26.2.1-46.8.3l-23.6.2-17.8 15.5c-47.1 41-104.4 71.5-171.4 87.6-52.5 12.6-110 16.2-172.7 9.6 18-20.5 36.5-41.6 55.4-63.1 92-104.6 173.8-197.5 236.9-268.5l1.4-1.4 1.3-1.5c4.1-4.6 20.6-23.3 24.7-28.1 9.7-11.1 17.3-19.9 24.5-28.6 30.7-36.7 52.2-67.8 69-102.2l1.6-3.3 1.2-3.4c13.7-38.8 15.4-76.9 6.2-112.8 22.5.7 46.5 1.9 71.7 3.6 33.3 2.3 55.5 12.9 71.1 29.2 5.8 6 10.2 12.5 13.4 18.7 1 2 1.7 3.6 2.3 5l5 17.7c-15.7 34.5-19.9 73.3-11.4 107.2 3 11.8 6.9 22.4 12.3 34.4 2.1 4.7 9.5 20.1 11 23.3 10.3 22.7 15.4 43 16.7 78.7 3.3 94.6-82.7 181.9-182 181.9z"></path></svg> 使用语雀查看</a>