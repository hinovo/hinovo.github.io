(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{215:function(t,e,a){"use strict";a.r(e);var s=a(0),o=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"了解-oauth-应用的授权范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#了解-oauth-应用的授权范围"}},[t._v("#")]),t._v(" 了解 OAuth 应用的授权范围")]),t._v(" "),a("p",[t._v("通过 scopes，你可以准确的指定所需的访问类型。scopes 限制 OAuth tokens 的访问权限。他们不会授予超出用户已有权限的任何其他权限。")]),a("p",[t._v("在语雀上设置 OAuth 应用程序时，会在授权表单上向用户显示请求的 scopes。")]),a("p",[t._v("检查你拥有的 OAuth scopes 以及 API 接受的 scopes：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X GET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n https://www.yuque.com/api/v2/user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n -H "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-Auth-Token: 授权后获得的 Token'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\nHeaders：\nX-OAuth-Scopes：doc,attach_upload\nX-Accepted-OAuth-Scopes：null\n\n")])])]),a("ul",[a("li",[a("code",[t._v("X-OAuth-Scopes")]),t._v(" 列出 access token 已被授权的 scopes。")]),a("li",[a("code",[t._v("X-Accepted-OAuth-Scopes")]),t._v(" "),a("span",[t._v("表明这个资源需要的 scopes")]),t._v("。")])]),a("p",[t._v("由于在语雀中用户基本的信息是默认提供的，不需要 scopes 授权，所以 "),a("code",[t._v("X-Accepted-OAuth-Scopes")]),t._v("  没有返回。而当读取知识库、文档等信息就需要检测了，会对 access token 进行鉴权，判断是否有读取这些信息的权限，同时接口"),a("span",[t._v("返回的")]),t._v("响应头会带上 "),a("code",[t._v("X-Accepted-OAuth-Scopes")]),t._v(" ，表明这个资源需要的 scopes。")]),t._v(" "),a("h3",{attrs:{id:"授权范围-scope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#授权范围-scope"}},[t._v("#")]),t._v(" 授权范围(scope)")]),t._v(" "),a("table",{staticClass:"lake-table"},[a("colgroup",[a("col",{attrs:{width:"236"}}),a("col",{attrs:{width:"456"}})]),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("p",[a("strong",[t._v("名词")])])]),a("td",{staticStyle:{"text-align":"center"}},[a("p",[a("strong",[t._v("描述")])])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("strong",[a("code",[t._v("(no scope)")])])])]),a("td",[a("p",[t._v("授予对公共信息的只读访问权限（只能获取用户信息，不包含手机号和邮箱"),a("span",[t._v("）")])])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("code",[t._v("group")])])]),a("td",[a("p",[t._v("修改和读取你的团队")])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("group:read")])]),a("td",[a("p",[t._v("读取你的团队信息")])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("code",[t._v("repo")])])]),a("td",[a("p",[t._v("修改和读取你的知识库")])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("code",[t._v("repo:read")])])]),a("td",[a("p",[t._v("读取你的知识库")])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("code",[t._v("topic")])])]),a("td",[a("p",[t._v("修改和读取你的主题")])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("code",[t._v("topic:read")])])]),a("td",[a("p",[t._v("读取你的主题")])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("code",[t._v("doc")])])]),a("td",[a("p",[t._v("修改和读取你的文档")])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("code",[t._v("doc:read")])])]),a("td",[a("p",[t._v("读取你的文档")])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("code",[t._v("artboard")])])]),a("td",[a("p",[t._v("修改和读取你的画板")])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("code",[t._v("artboard:read")])])]),a("td",[a("p",[t._v("读取你的画板")])])])])]),a("blockquote",{staticClass:"lake-alert lake-alert-info"},[a("p",[a("span",{staticStyle:{color:"#003A8C"}},[a("strong",[t._v("注意：")]),t._v("你的 OAuth 应用可以在初始重定向定义这些 scopes。多个 scope ")]),a("span",{staticStyle:{color:"#003A8C","background-color":"#E8F7FF"}},[t._v("你可以通过用逗号 “,” 来分隔")]),a("span",{staticStyle:{color:"#003A8C"}},[t._v("指定它们。")])])]),a("p",[a("span",{staticStyle:{color:"#003A8C"}},[a("br")])]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yuque"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("oauth2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("authorize"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("client_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("scope"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("doc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("repo \n")])])]),a("h3",{attrs:{id:"规范化范围-scope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#规范化范围-scope"}},[t._v("#")]),t._v(" 规范化范围(scope)")]),t._v(" "),a("p",[t._v("请求多个作用域时，token 将使用规范化的作用域列表进行保存，并且丢弃另一个请求作用域隐式包含的作用域。例如：请求 "),a("code",[t._v("doc,doc:read,repo")]),t._v("  的结果是 "),a("code",[t._v("doc,repo")]),t._v(" ，因为 "),a("code",[t._v("doc:read")]),t._v(" 的作用域是包含在 "),a("code",[t._v("doc")]),t._v(" 中的，所以会进行丢弃。")]),t._v(" "),a("h3",{attrs:{id:"高级授权范围-scope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#高级授权范围-scope"}},[t._v("#")]),t._v(" 高级授权范围(scope)")]),t._v(" "),a("p",[t._v("上传属于高级 scope，默认是不会开放的，需要这个 scope 的应用需要单独申请开通。")]),a("p",[t._v("申请请发送邮件到 "),a("code",[t._v("support@yuque.com")]),t._v(" ，说明申请的原因。")]),a("table",{staticClass:"lake-table"},[a("colgroup",[a("col",{attrs:{width:"236"}}),a("col",{attrs:{width:"456"}})]),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("p",[a("strong",[t._v("名词")])])]),a("td",{staticStyle:{"text-align":"center"}},[a("p",[a("strong",[t._v("描述")])])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("p",[a("strong",[a("code",[t._v("attach_upload")])])])]),a("td",[a("p",[t._v("附件上传（仅图片）")]),a("p",[t._v("接口地址："),a("a",{attrs:{href:"https://www.yuque.com/yuque/developer/high_level_api#684fb2c5",target:"_blank"}},[t._v("文件上传")])])])])])]),a("br"),a("br"),a("a",{staticClass:"yuque-link",attrs:{target:"_blank",href:"https://www.yuque.com/yuque/developer/understanding-scopes-for-oauth-apps"}},[a("svg",{attrs:{viewBox:"64 64 896 896","data-icon":"yuque",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}},[a("path",{attrs:{d:"M854.6 370.6c-9.9-39.4 9.9-102.2 73.4-124.4l-67.9-3.6s-25.7-90-143.6-98c-117.8-8.1-194.9-3-195-3 .1 0 87.4 55.6 52.4 154.7-25.6 52.5-65.8 95.6-108.8 144.7-1.3 1.3-2.5 2.6-3.5 3.7C319.4 605 96 860 96 860c245.9 64.4 410.7-6.3 508.2-91.1 20.5-.2 35.9-.3 46.3-.3 135.8 0 250.6-117.6 245.9-248.4-3.2-89.9-31.9-110.2-41.8-149.6zm-204.1 334c-10.6 0-26.2.1-46.8.3l-23.6.2-17.8 15.5c-47.1 41-104.4 71.5-171.4 87.6-52.5 12.6-110 16.2-172.7 9.6 18-20.5 36.5-41.6 55.4-63.1 92-104.6 173.8-197.5 236.9-268.5l1.4-1.4 1.3-1.5c4.1-4.6 20.6-23.3 24.7-28.1 9.7-11.1 17.3-19.9 24.5-28.6 30.7-36.7 52.2-67.8 69-102.2l1.6-3.3 1.2-3.4c13.7-38.8 15.4-76.9 6.2-112.8 22.5.7 46.5 1.9 71.7 3.6 33.3 2.3 55.5 12.9 71.1 29.2 5.8 6 10.2 12.5 13.4 18.7 1 2 1.7 3.6 2.3 5l5 17.7c-15.7 34.5-19.9 73.3-11.4 107.2 3 11.8 6.9 22.4 12.3 34.4 2.1 4.7 9.5 20.1 11 23.3 10.3 22.7 15.4 43 16.7 78.7 3.3 94.6-82.7 181.9-182 181.9z"}})]),t._v(" 使用语雀查看")])])}),[],!1,null,null,null);e.default=o.exports}}]);